#====================
# [ Source Config ]
#====================
monitor = , preferred, auto, 1.2
# monitor = , 1280x720@60, auto, 1

input {
  kb_layout = us
  kb_options = caps:escape, compose:ralt
  numlock_by_default = true
}

xwayland {
  force_zero_scaling = true
}

#[ Animations ]
source = ~/.config/caelestia/animations/vert.conf

#[ Kebinds ]
bind = SUPER ALT, Return, exec, app2unit -- ghostty
bind = SUPER, O, exec, app2unit -- obsidian
bind = SUPER, W, exec, app2unit -- flatpak run com.rtosta.zapzap
# bind = SUPER, S, exec, app2unit -- spotify

bind = SUPER, N, exec, app2unit -- kitty --class nmtui-settings nmtui
bind = SUPER, B, exec, app2unit -- blueman-manager
bind = SUPER, V, exec, app2unit -- pavucontrol


#==============
#  [ EXECS ]
#==============
exec-once = sleep 2 && caelestia shell wallpaper set ~/.local/state/caelestia/wallpaper/current

exec-once = [workspace 2 silent] kitty

exec-once=udiskie

#[ GTK && THEME ]
$GTK_THEME = adw-gtk3-dark
$ICON_THEME = Tela-nord
$COLOR_SCHEME = prefer-dark
# $CURSOR = Bibata-Modern-DodgerBlue
$CURSOR = Bibata-Modern-Classic
$CSIZE = 36

#[ Cursors ]
exec = sleep 1 && hyprctl setcursor $CURSOR $CSIZE
exec = sleep 1 && gsettings set org.gnome.desktop.interface cursor-theme '$CURSOR'
exec = sleep 1 && gsettings set org.gnome.desktop.interface cursor-size $CSIZE

exec = sleep 1 && gsettings set org.gnome.desktop.interface icon-theme $ICON_THEME
exec = sleep 1 && gsettings set org.gnome.desktop.interface gtk-theme $GTK_THEME
exec = sleep 1 && gsettings set org.gnome.desktop.interface color-scheme $COLOR_SCHEME

#====================
# [ Windows Rules]
#====================

# [ Disable Blur ]
windowrulev2 = noblur, xwayland:1

# windowrule = opacity 1 1,class:^(zen)$
# windowrule = opacity 1 1,class:^(mpv)$
# windowrule = opacity 1 1,class:^(EDRLab.ThoriumReader)$

#[ Special workspaces ] 
windowrule = workspace special:sysmon, class:btop|htop|nvtop
windowrule = workspace special:communication, class:com.rtosta.zapzap|whatsapp
windowrule = workspace special:todo, class:obsidian


#[ Dialog windows - Center - Float]
windowrule = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = size 80% 80%, class:^(xdg-desktop-portal-gtk)$

windowrulev2 = float, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$
windowrulev2 = center, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$
windowrulev2 = size 80% 80%, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$
windowrulev2 = minsize 400 300, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$

#[ Archive extraction dialogs - Center + Float ] 
windowrulev2 = float, title:^(Extract|Extract Here|Extract to Folder|Archive Extractor)(.*)$
windowrulev2 = center, title:^(Extract|Extract Here|Extract to Folder|Archive Extractor)(.*)$
windowrulev2 = size 80% 80%, title:^(Extract|Extract Here|Extract to Folder|Archive Extractor)(.*)$

#[ Generic GTK/Qt dialogs (fallback) ] 
windowrulev2 = float, class:^(.*)(dialog|Dialog)(.*)$
windowrulev2 = center, class:^(.*)(dialog|Dialog)(.*)$
windowrulev2 = size 80% 80%, class:^(.*)(dialog|Dialog)(.*)$

#[ Picture in picture (resize and move done via script) ]
windowrule = move 100%-w-2% 100%-w-3%, title:Picture(-| )in(-| )[Pp]icture
windowrule = keepaspectratio, title:Picture(-| )in(-| )[Pp]icture
windowrule = float, title:Picture(-| )in(-| )[Pp]icture
windowrule = pin, title:Picture(-| )in(-| )[Pp]icture

#[ Center - Float nmgui/nmtui ]
windowrulev2 = float, title:^(.*Network Manager.*)$

windowrulev2 = float, class:^nmtui-settings$
windowrulev2 = center, class:^nmtui-settings$
windowrulev2 = size 70% 70%, class:^nmtui-settings$

#[ Blueman (Bluetooth Manager) - Center   Float ]
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = center, class:^(blueman-manager)$
windowrulev2 = size 65% 65%, class:^(blueman-manager)$

#[ Windscribe ]
windowrulev2 = float, initialclass:Windscribe
windowrulev2 = center, initialclass:Windscribe
windowrulev2 = size 500 650, initialclass:Windscribe
